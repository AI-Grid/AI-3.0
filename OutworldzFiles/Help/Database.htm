<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:5.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:5.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	line-height:115%;
	background:#4472C4;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;
	color:white;
	text-transform:uppercase;
	letter-spacing:.75pt;
	font-weight:normal;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:5.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	line-height:115%;
	background:#D9E2F3;
	border:none;
	padding:0in;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;
	text-transform:uppercase;
	letter-spacing:.75pt;
	font-weight:normal;}
a:link, span.MsoHyperlink
	{color:#0563C1;
	text-decoration:underline;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	color:white;
	text-transform:uppercase;
	letter-spacing:.75pt;
	background:#4472C4;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	text-transform:uppercase;
	letter-spacing:.75pt;
	background:#D9E2F3;}
.MsoChpDefault
	{font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{margin-top:5.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;}
 /* Page Definitions */
 @page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link="#0563C1" vlink="#954F72" style='word-wrap:break-word;
text-justify-trim:punctuation'>

<div class=WordSection1>

<div style='border:solid #4472C4 3.0pt;padding:0in 0in 0in 0in;background:#4472C4'>

<h1><a name="OLE_LINK6"></a><a name="_Hlk96522307"><span lang=EN>Database
Settings</span></a></h1>

</div>

<p class=MsoNormal><span lang=EN>Did MySQL crash?  See section <b>Crashes</b>. 
 </span></p>

<p class=MsoNormal style='margin-right:31.5pt'><img width=629 height=280
id="Picture 1" src="Database_files/image001.png"
alt="Graphical user interface&#10;&#10;Description automatically generated"></p>

<p class=MsoNormal><b><span lang=EN>Do not change any of these settings without
knowing what you are doing! </span></b></p>

<p class=MsoNormal><span lang=EN>Any change here must match complicated
hand-made changes in MySQL!  See the bottom of this help section for more details.</span></p>

<p class=MsoNormal><span lang=EN>There are two databases in DreamGrid: Robust
is the login and inventory database.  Each region also uses a separate Opensim
database for storing what is in region.</span></p>

<p class=MsoNormal><span lang=EN>Database root password is blank. This is safe
as it only listens on localhost, which is your server.</span></p>

<div style='border:solid #D9E2F3 3.0pt;padding:0in 0in 0in 0in;background:#D9E2F3'>

<h2><span lang=EN style='color:black'>Robust Database:</span></h2>

</div>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><b><span lang=EN>Robust Server: </span></b><span lang=EN>should
     always be 127.0.0.1. This is the Server that runs Robust (itself). It can
     be the IP address of a different server running MySQL.<br>
     <br>
     Default: <i>127.0.0.1</i></span></li>
 <li class=MsoNormal><b><span lang=EN>Robust name</span></b><span lang=EN>: 
     The name of the Robust database. <br>
     <br>
     Default: <i>robust</i></span></li>
 <li class=MsoNormal><b><span lang=EN>User Name:</span></b><span lang=EN>  The
     login name 'robustuser'@localhost'. <br>
     <br>
     Default: <i>robustuser</i></span></li>
 <li class=MsoNormal><b><span lang=EN>Password:</span></b><span lang=EN> The
     password for Robust. </span></li>
 <li class=MsoNormal><span lang=EN>Default: <i>robustpassword</i></span></li>
 <li class=MsoNormal><b><span lang=EN>MySQL Port: </span></b><span lang=EN>The
     TCP/IP port that both databases use. <br>
     <br>
     Default = 3306. You can set this to 3307, 3308 or 3309 to not interfere
     with the Other MySQL’s that may be running.  </span></li>
 <li class=MsoNormal><b><span lang=EN>FSAssets:</span>  </b>You can select the
     FSAssets button to set up a File System As Assets Database. This is
     recommended only for large grids, with hundreds of Gigabyte sized
     databases.</li>
</ul>

<div style='border:solid #D9E2F3 3.0pt;padding:0in 0in 0in 0in;background:#D9E2F3'>

<h2><span lang=EN style='color:black'>Local Region Database:</span></h2>

</div>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><b><span lang=EN>DB name</span></b><span lang=EN>:  The
     name of the region database. <br>
     <br>
     default: <i>opensim</i></span></li>
 <li class=MsoNormal><b><span lang=EN>User Name:</span></b><span lang=EN>  The
     login name 'opensimuser'@localhost'. <br>
     <br>
     default: <i>opensimuser</i></span></li>
 <li class=MsoNormal><b><span lang=EN>Password:</span></b><span lang=EN> The
     password for opensim region database.  <br>
     <br>
     default = <i>opensimpassword</i></span></li>
 <li class=MsoNormal><b><span lang=EN>MySQL Port: </span></b><span lang=EN>The
     TCP/IP port that both databases use. <br>
     <br>
     Default = 3309 to not interfere with the normal MySQL Port of 3306</span></li>
</ul>

<p class=MsoNormal style='margin-top:5.0pt;margin-right:31.5pt;margin-bottom:
10.0pt;margin-left:.5in'><span lang=EN style='font-family:"Verdana",sans-serif'>If
you want to alter the username and password to either database, you must use
the MySQL.exe program in a DOS box.</span></p>

<p class=MsoNormal style='margin-top:5.0pt;margin-right:31.5pt;margin-bottom:
10.0pt;margin-left:.5in'><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:"Courier New"'>cd Outworldzfiles\mysql\bin<br>
mysql -u root<br>
use opensim;<br>
create user 'anewopensimuser'@'localhost' identified by 'opensimpassword';<br>
grant all on opensim.* to 'anewopensimuser'@'localhost';<br>
use robust;<br>
create user 'anewrobustuser'@'localhost' identified by 'robustpassword';<br>
grant all on robust.* to 'anewrobustuser'@'localhost';<br>
quit;</span></p>

<p class=MsoNormal style='margin-top:5.0pt;margin-right:31.5pt;margin-bottom:
10.0pt;margin-left:.5in'><b><span lang=EN style='font-family:"Verdana",sans-serif'>&nbsp;</span></b></p>

<div style='border:solid #D9E2F3 3.0pt;padding:0in 0in 0in 0in;background:#D9E2F3'>

<h2><span lang=EN style='color:black'>Running MySQL as a Service</span></h2>

</div>

<p class=MsoNormal><span style='background:white'>DreamGrid will detect any
running MySQL using the same port.  You can install MySQL as a Windows service.
There is a batch file “InstallAsAService.bat” in MySQL\bin to set this up. MySQL
will then start and stop safely with Windows. This batch file must be run once,
as an Administrator. You type &quot;CMD&quot; in the search box, and then right
click the Command Prompt and select &quot;Run as Administrator&quot;.&nbsp;</span></p>

<p class=MsoNormal style='margin-top:5.0pt;margin-right:31.5pt;margin-bottom:
10.0pt;margin-left:.5in'><span lang=EN style='font-family:"Verdana",sans-serif'><img
width=405 height=380 id="Picture 2" src="Database_files/image002.png"></span></p>

<p class=MsoNormal style='margin-top:5.0pt;margin-right:31.5pt;margin-bottom:
10.0pt;margin-left:.5in'><span lang=EN style='font-family:"Verdana",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal><span style='background:white'>Use that DOS box to run <b>InstallAsAService.bat</b>.
Then type in 'Services.msc&quot;, and use it to start MySQL, or type in ‘net
start MySQL’&lt;enter&gt;.&nbsp; </span></p>

<p class=MsoNormal><span style='background:white'>You can verify MySQL is
running by typing 'mysql - u root&lt;enter&gt;'.   If you get a MySQL prompt,
it is running as a service. Then type quit; with the semicolon and enter.</span><br>
<br>
<span style='background:white'>You should also set the service to restart so
MySQL restarts on any crash. Windows knows about services and will send signals
to MySQL to shut itself off gracefully. The only danger is that power fails and
you corrupt the database.  If you are serious about running a grid, then a UPS
is necessary.</span></p>

<div style='border:solid #D9E2F3 3.0pt;padding:0in 0in 0in 0in;background:#D9E2F3'>

<h2><span style='color:black'>MySQL Crashes:</span></h2>

</div>

<p class=MsoNormal>Your MySQL database may be crashed. Here is a way to recover
and start MYSQL manually.</p>

<p class=MsoNormal>Navigate to the&nbsp;<b>Outworldzfiles\mysql\bin</b>&nbsp;folder.
</p>

<p class=MsoNormal>Then double-click &quot;StartManually.bat”</p>

<p class=MsoNormal>Any error message it prints may be helpful. If the DOS
window closes, a MySQL LOG file will be saved in OutworldzFiles\mysql\data as a
*.err file. That may give you a clue as to what to do.</p>

<div style='border:solid #D9E2F3 3.0pt;padding:0in 0in 0in 0in;background:#D9E2F3'>

<h2><span style='color:black'>My database still did not start!</span></h2>

</div>

<p class=MsoNormal>Try running&nbsp;<b>Outworldzfiles\mysql\bin\Repair_ISAM.bat.</b></p>

<p class=MsoNormal>Then double-click &quot;StartManually.bat”. The DOS window
that appears should ‘stick’ open.</p>

<p class=MsoNormal>Run Task manager by typing Ctrl-Shift-ESC.</p>

<p class=MsoNormal>Look for <i>mysqld.exe.</i>  Wait for the CPU usage to go to
0 on mysqld.exe. This may take a long time as MySQL is rebuilding the database.
It could take an hour or more, depending upon the size and your disk and CPU
speed.</p>

<p class=MsoNormal>Double click CheckandRepair.bat to run diagnostics.</p>

<p class=MsoNormal>If errors appear, answer any questions with a ‘Y’. This will
take a long time as MySQL is repairing the database.</p>

<p class=MsoNormal>Once the Check and Repair is finished, double-click
Mysql\bin\StopMySQL.bat’</p>

<p class=MsoNormal>The DOS box that first appeared should now close.   Your
database has been recovered and it is safe to start DreamGrid.</p>

<p class=MsoNormal><b>If you still have issues</b>, delete the file MySQL\Data\ib_logfile0
and ib_logfile1. Do not delete ibdata1! Then repeat the above sequence.</p>

<p class=MsoNormal>If I had really deep issues with a database and it was
unrecoverable, I would try the last copied one,&nbsp;then the SQL, then an
OAR,&nbsp;and the very last thing I would try is an OAR/IAR
restore.&nbsp;&nbsp;&nbsp; So far I have recovered at least a dozen databases
for people. &nbsp; One developed a bad bit which took about a week to ftp, to
develop a fix for and a simple query to repair.&nbsp; </p>

<p class=MsoNormal>Also have fixed a crashed &quot;primitems&quot; table that
has reoccurred on one grid.  You log in to MySQL with the command ‘mysql -u
root’ and type in:</p>

<p class=MsoNormal><span style='font-family:"Courier New"'>use opensim;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>repair table
primitems;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>quit;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><b>Please do not give up if your database will not start!  
Contact me at </b><a href="mailto:fred@outworldz.com"><b><span
style='font-family:"Verdana",sans-serif'>fred@outworldz.com</span></b></a><b>
and I will see what I can do. I have not yet lost a database.</b></p>

<div style='border:solid #D9E2F3 3.0pt;padding:0in 0in 0in 0in;background:#D9E2F3'>

<h2><span style='color:black'>Starting Over with a <u>Blank </u>Database</span></h2>

</div>

<p class=MsoNormal>You can wipe ALL data out.  If you do this, you must
re-enter all accounts and recreate your system from OAR and IAR files. <u>This
WILL LOSE ALL DATA. </u></p>

<p class=MsoNormal>I recommend you make a backup of the MySQL\Data folder
first.</p>

<p class=MsoNormal>I have not yet ‘lost’ a database, and I have seen dozens of
them crash in oddball ways. Please contact me at <a
href="mailto:fred@outworldz.com"><span style='color:#0563C1'>fred@outworldz.com</span></a>
if you have questions or need more help in recovering a database. The largest
was 70 Gigabytes which took four days just to get a copy sent to me. It was
fixed in a few hours. The problem was to a single bad character in a UUID. So
please do not delete it unless you really, really want to start over!</p>

<p class=MsoNormal>If you MUST wipe out the database and start over, delete the
folder MySQL\data.   Then extract the contents of the file
Blank-Mysql-Data-folder.zip to make a new MySQL\Data folder.</p>

<p class=MsoNormal>This will make it start over at the very beginning.  The
database should start up now.  You must go to Robust; type create
user&lt;enter&gt;’ and re-enter your Avatar name and password. You can then
re-enter your estate information in each DOS box for Each region.   </p>

<p class=MsoNormal>You can restore the database if you have a .SQL backup. Or
use OARs and IARs.</p>

</div>

</body>

</html>
